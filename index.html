<!DOCTYPE html>
<html>
<head>
	<title>Wildstar Armory</title>
	<script>
		function view(){
			var data = document.getElementById('data').value,
			query;

			try { data = atob(data) }
			catch(err){ }
			finally {
				try { data = JSON.parse(data) }
				catch(err) {
					alert("Invalid data (has to be JSON)");
					return;
				}
			}

			// TODO: validate object "data"
			query = '';
			for (var key in data) {
				query = query
					+ '&'
					+ encodeURIComponent(key)
					+ '='
					+ encodeURIComponent(data[key])
				;
			}
			window.location.assign('view.html?' + query.slice(1));
		}
	</script>
</head>
<body>
	<h1>Wildstar Armory</h1>

	<p>
		<textarea id="data" rows="8" cols="64" autofocus></textarea>
		<br/>
		<button onclick="view()">Load</button>
	</p>
</body>
</html>
