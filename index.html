<!DOCTYPE html>
<html>
<head>
	<title>Wildstar Armory</title>
	<script>
		function view(){
			var input = document.getElementById('input').value,
			query;

			try { input = atob(input) }
			catch(err){ }
			finally {
				try { input = JSON.parse(input) }
				catch(err) {
					alert("Invalid input");
					return;
				}
			}

			// TODO: validate object "input"
			query = '';
			for (var key in input) {
				query = query
					+ '&'
					+ encodeURIComponent(key)
					+ '='
					+ encodeURIComponent(input[key])
				;
			}

			window.location.assign('view.html?' + query.slice(1));
		}
	</script>
</head>
<body>
	<h1>Wildstar Armory</h1>

	<textarea id="input" rows="8" cols="64" autofocus></textarea>
	<p><button onclick="view()">Load</button><p>
</body>
</html>
